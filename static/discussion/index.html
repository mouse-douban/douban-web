<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="referrer" content="never">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¨è®ºåŒº</title>
    <link rel="stylesheet" href="../css/discussion.css">
    <link rel="stylesheet" href="../css/top-bar-status.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="shortcut icon" href="https://img3.doubanio.com/favicon.ico">
    <script src="../js/components.js"></script>
    <script src="../js/discussion.js" type="module" defer></script>
</head>
<body>
    <div id="top-nav-items">
        <ul id="top-nav-ul" style="display:inline-block;">
            <li>
                <span class="top-nav-item" onclick="alert('æ²¡æœ‰ä¸»é¡µï¼å“¼ğŸ˜•')">è±†ç“£</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('å°±çŸ¥é“è¯»ä¹¦ï¼')">è¯»ä¹¦</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="window.location.href = '../index.html'">ç”µå½±</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('å°±çŸ¥é“å¬éŸ³ä¹ï¼')">éŸ³ä¹</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('å•Šè¿™...æˆ‘ä¸å¥½è¯´äº†')">åŒåŸ</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('å°±çŸ¥é“å°ç»„ï¼')">å°ç»„</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('è·Ÿè¯»ä¹¦æœ‰åŒºåˆ«å—ï¼Ÿå“¼ğŸ˜•')">é˜…è¯»</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('ä»€ä¹ˆå¹´ä»£äº†è¿˜å¬å¹¿æ’­ åŸæ¥æˆ‘ä¹Ÿå¬é‚£æ²¡äº‹äº†')">FM</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('æ²¡æ—¶é—´å•¦ ä¸‡ç­–å°½å•¦ï¼ï¼ï¼ğŸ˜±')">æ—¶é—´</span>
            </li>
            <li>
                <span class="top-nav-item" onclick="alert('æ‹’ç»è¶…å‰æ¶ˆè´¹!')">è±†å“</span>
            </li>
        </ul>
        <div id="top-nav-right-items">
            <ul id="top-nav-right-ul">
                <li>
                    <span class="top-nav-item" onclick="alert('flutteråœ¨å­¦äº†ğŸ˜­')">ä¸‹è½½è±†ç“£å®¢æˆ·ç«¯</span>
                </li>
                <li>
                    <span class="top-nav-item" id="login-nav-item">ç™»å½•/æ³¨å†Œ</span>
                </li>
            </ul>
        </div>
    </div>
    <div id="search-area">
        <div id="search-content">
            <div id="nav-logo" onclick="window.location.href = '../index.html'"></div>
            <div id="nav-search">
                <fieldset style="display: inline-flex;border: 0px;">
                    <label for="inp-query"></label>
                    <div class="inp">
                        <input id="inp-query" class="card" name="search_text" size="22" maxlength="60"
                                placeholder="æœç´¢ç”µå½±ã€ç”µè§†å‰§ã€ç»¼è‰ºã€å½±äºº" autocompelete="off">
                    </div>
                    <div class="inp-btn">
                        <input type="submit" value="æœç´¢">
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    <script>
        const types = [
            "æˆ‘çœ‹",
            "å½±è®¯&è´­ç¥¨",
            "é€‰ç”µå½±",
            "ç”µè§†å‰§",
            "æ’è¡Œæ¦œ",
            "åˆ†ç±»",
            "å½±è¯„",
            "2021å¹´åº¦æ¦œå•",
            "2021ä¹¦å½±éŸ³æŠ¥å‘Š",
        ]
        const tl = new TabLayout(types, tab => {
            switch (tab) {
                case "æˆ‘çœ‹": {
                    window.location.href = "../index.html"
                    break
                }
                default: {
                    alert("æœªå®ç°")
                }
            }
            return false
        })
        tl.style = "position: relative;left: 225px;width: fit-content;"
        document.querySelector("body").appendChild(tl)
    </script>
    <div class="content-box">
        <h1 id="name" style="color: #494949;margin: 20px 0 10px 0;">è®¨è®ºæ ‡é¢˜</h1>
        <div class="info">
            <img id="avatar" src="https://gitee.com/coldrain-moro/images_bed/raw/master/images/remilia.png" width="32px" height="32px">
            <span class="user">å¯’é›¨</span>
            <span class="date">2022-02-20 14:08:44</span>
        </div>
        <div class="discussion-content-box">
           <p class="discussion-content">å¸Œæœ›æ–°å† ç–«æƒ…æ—©ç‚¹ç»“æŸï¼Œå¤§å®¶éƒ½å¥å¥åº·åº·</p> 
        </div>
        <div style="display: flex;justify-content: end;">
            <button class="btn like-btn" style="background: #ffdec1;color: #b85702;font-size: 15px;border-color: #ffbb80;">
                <img src="https://img3.doubanio.com/f/shire/7c87c891556458f5a6790865d0d3c0743fa1ca26/pics/actions/ic_action_like@2x.png" width="16px" height="16px" style="margin-right: 5px;"> 
                <span id="stars">èµ 1</span>
            </button>
            <button class="btn collect-btn" style="background: #eff7ed;color: #1e8803;font-size: 15px;border-color: #cfe0cb;">
                <img src="https://img3.doubanio.com/f/shire/cda782f2a206ee85f26854e2dd6f252a6e7aa153/pics/actions/ic_action_save@2x.png" width="16px" height="16px" style="margin-right: 5px;">
                æ”¶è—
            </button>
            <button class="btn transmit-btn" style="background: #eff7ed;color: #1e8803;font-size: 15px;border-color: #cfe0cb;">è½¬å‘</button>
        </div>
        <h2 style="border-bottom: 1px solid #e9e9e9;padding-bottom: 10px;margin-top: 10px;">å›åº”</h2>
        <div style="width: 100%;" class="reply-container">
            <discussion-reply
                avatar="https://gitee.com/coldrain-moro/images_bed/raw/master/images/remilia.png"
                author="å¯’é›¨"
                time="2022-02-20 14:08:44"
                content="å¸Œæœ›æ–°å† ç–«æƒ…æ—©ç‚¹ç»“æŸï¼Œå¤§å®¶éƒ½å¥å¥åº·åº·"
            ></discussion-reply>
        </div>
        <script>
            async function onloadMoreReply() {
                const container = document.querySelector(".reply-container");
                const discussionId = localStorage.getItem("discussionId");
                const page = this.discussionPage || 0;
                const res = await fetch(`https://api.douban.skygard.cn:8080/replies/${discussionId}?start=${page * 20}&limit=20&sort=hotest&type=discussion`).then(res => res.json());
                const data = res.data
                data.forEach(async item => {
                    const reply = document.createElement("discussion-reply");
                    reply.setAttribute("avatar", item.avatar);
                    reply.setAttribute("author", item.username);
                    reply.setAttribute("time", item.date.replace("T", " ").replace("Z", ""));
                    reply.setAttribute("content", item.content);
                    container.appendChild(reply);
                });
                this.discussionPage = page + 1;
                return data.length != 0;
            }
        </script>
        <recycler-tail onloadmore="onloadMoreReply()"></recycler-tail>
        <script>
            onloadMoreReply()
        </script>
        <h2 class="sub-title" style="margin-bottom: 30px;">ä½ çš„å›åº” Â· Â· Â· Â· Â· Â·</h2>
        <textarea class="reply-input" placeholder="ç•™ä¸‹ä¸€æ¡å‹å–„çš„å›åº”~"></textarea>
        <button class="btn submit" style="float: right;margin-top: 10px;font-size: 18px;margin-bottom: 50px;">å›å¤</button>
    </div>
</body>
</html>